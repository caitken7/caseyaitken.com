// ===========================================
// Projects
// ===========================================

const projectData = [
  {
    "title": "Carbon38",
    "description": "A premier e-commerce destination for high-fashion activewear, women`s ready-to-wear, and performance fashion.",
    "platform": "Shopify",
    "role": "I built this site from a base Shopify theme (Prestige). Work included a new homepage, several new custom sections, app integrations such as Klaviyo, and reskinning all pages based on mockups and style guides.",
    "url": "https://carbon38.com/",
    "image_thumbnail": "img-bva/carbon38.png",
    "image_desktop": "img-bva/carbon38.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "RedBull Shop",
    "description": "The official online shop for RedBull hats, t-shirts, backpacks, jackets and more.",
    "platform": "Shopify",
    "role": "Provided general updates and support for the live site, including new homepage sections and collections page updates.",
    "url": "https://www.redbullshopus.com/",
    "image_thumbnail": "img-bva/redbull.png",
    "image_desktop": "img-bva/redbull.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "Vita Coco",
    "description": "A plant-based functional hydration platform, which produces packaged coconut water.",
    "platform": "Shopify",
    "role": "Lead Developer. Provided general updates and scoped tasks for other developers. Built a landing page for the Vita Coco QR campaign, involving use of the Yotpo Rewards API.",
    "url": "https://vitacoco.com/",
    "image_thumbnail": "img-lsg/vita-coco.png",
    "image_desktop": "img-lsg/vita-coco.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "NOBULL",
    "description": "An outdoor and sporting goods company know for cross training footwear, apparel and accessories.",
    "platform": "Shopify",
    "role": "Provided general updates and support for the live site.",
    "url": "https://www.nobullproject.com/",
    "image_thumbnail": "img-bva/nobull.png",
    "image_desktop": "img-bva/nobull.png",
    "image_mobile": "",
    "disabled": true
  },
  {
    "title": "Truff",
    "description": "Wholesaler and manufacturer of truffle-based hot sauces, pasta sauces, and food products.",
    "platform": "Shopify",
    "role": "Helped win Truff as a client for my agency. This was a headless site built with React, developed by a partner agency. I provided scoping and estimates for development of a revamped customer portal, involving use of Yotpo and ReCharge.",
    "url": "https://www.truff.com/",
    "image_thumbnail": "img-lsg/truff.png",
    "image_desktop": "img-lsg/truff.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "Enro",
    "description": "A face mask manufacturing company that delivers all kinds of face masks with a focus on comfort, filtration technology, and breathability.",
    "platform": "Shopify",
    "role": "Primary developer. Responsible for updating all aspects of the site. Completed overhaul of all pages including homepage, PDP, collections, etc., as well as implemented custom features such as a cart slider, collections filtering feature, advanced swatches, and front-end logic for revamped product architecture. Additionally performed site speed audits and implementations.",
    "url": "https://enro.com/",
    "image_thumbnail": "img-bva/enro.png",
    "image_desktop": "img-bva/enro.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "Glassybaby",
    "description": "A Seattle-based nonprofit company that offers hand-blown glass votives and drinkers in hundreds of colors.",
    "platform": "Shopify",
    "role": "Primary developer. Provided general updates and support for the live site. Performed extensive revamp of their PDP and collections pages.",
    "url": "https://www.glassybaby.com/",
    "image_thumbnail": "img-bva/glassybaby.png",
    "image_desktop": "img-bva/glassybaby.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "1UP Nutrition",
    "description": "An online DTC brand that offers a wide range of diet and sports nutrition products.",
    "platform": "Shopify",
    "role": "Provided general updates and support for the live site, including revamp of all account pages.",
    "url": "https://1upnutrition.com/",
    "image_thumbnail": "img-bva/1up.png",
    "image_desktop": "img-bva/1up.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "A Pup Above",
    "description": "Food and beverage company that offers healthy, meat-based, sous-vide-cooked food for adult and senior dogs.",
    "platform": "Shopify",
    "role": "Lead Developer. Revamped product detail pages as part of a site-wide refresh. Implemented complex tag-based logic to link together products and content to accomodate a new product line. Included extensive integration with the Retexion subscription app.",
    "url": "https://apupabove.com/",
    "image_thumbnail": "img-lsg/a-pup-above.png",
    "image_desktop": "img-lsg/a-pup-above.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "Aura Bora",
    "description": "Beverage brand selling sparkling water made from real herbs, fruits, and flowers.",
    "platform": "Shopify",
    "role": "Provided general updates and support for the live site. Revamped entire customer portal, featuring the integration of the Loyalty Lion rewards app. Implemented new webhooks for Loyalty Lion using Zapier to correctly attribute rewards points to customers who subscribe to text messaging.",
    "url": "https://aurabora.com/",
    "image_thumbnail": "img-lsg/aura-bora.png",
    "image_desktop": "img-lsg/aura-bora.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "Nowadays",
    "description": "Health-focused plant-based meat brand, known for their simple ingredient vegan nuggets.",
    "platform": "Shopify",
    "role": "Built a wholesale landing page, featuring Hubspot formbuilder integration and a custom video display section.",
    "url": "https://eatnowadays.com/",
    "image_thumbnail": "img-lsg/nowadays.png",
    "image_desktop": "img-lsg/nowadays.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "Outstanding Foods",
    "description": "Plant-based foods company that specializes in the fields of consumer goods, beverages, and snack foods.",
    "platform": "Shopify",
    "role": "Worked cooperatively with other developers to accomplish site build. Built out blog and article pages.",
    "url": "https://outstandingfoods.com/",
    "image_thumbnail": "img-lsg/outstanding-foods.png",
    "image_desktop": "img-lsg/outstanding-foods.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "Harmless Harvest",
    "description": "Progressive food & beverage initiative set to demonstrate an ecosystem-based businesses.",
    "platform": "Shopify",
    "role": "Provided general updates and support for the live site.",
    "url": "https://harmlessharvest.com/",
    "image_thumbnail": "img-lsg/harmless-harvest.png",
    "image_desktop": "img-lsg/harmless-harvest.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "Roman and Williams Guild",
    "description": "An architectural design studio that renders full-services in building and interiors design solutions.",
    "platform": "Shopify",
    "role": "Provided general updates and support for the live site. Helped solve multiple pixel attribution issues (Facebook, Google, Bing).",
    "url": "https://rwguild.com",
    "image_thumbnail": "img-lsg/rw-guild.png",
    "image_desktop": "img-lsg/rw-guild.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "Look Our Way",
    "description": "The world`s largest brand of the wacky waving inflatable tube men.",
    "platform": "Shopify",
    "role": "Developed multiple sections as part of the build team.",
    "url": "https://lookourway.com/",
    "image_thumbnail": "img-bva/lookOurWay.png",
    "image_desktop": "img-bva/lookOurWay.png",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "Morris & Sons",
    "description": "Men`s fine clothing retailer and tailoring service in Chicago, IL since 1952. Sadly this business & website has closed down.",
    "platform": "BigCommerce",
    "role": "Built the entire multi-page ecommerce site based on mockups and style guides.",
    "url": "",
    "image_thumbnail": "img-ae/morrisandsons-TN.jpg",
    "image_desktop": "img-ae/morrisandsons-desktop.jpg",
    "image_mobile": "img-ae/morrisandsons-mobile.jpg",
    "disabled": ""
  },
  {
    "title": "Academy Mortgage",
    "description": "A Utah based independent mortgage lender.",
    "platform": "Sitefinity",
    "role": "Built the entire front-end of this multi-page site based on mockups and style guides.",
    "url": "https://www.academymortgage.com/",
    "image_thumbnail": "img-ae/academymortgage-TN.jpg",
    "image_desktop": "img-ae/academymortgage-desktop.jpg",
    "image_mobile": "img-ae/academymortgage-mobile.jpg",
    "disabled": ""
  },
  {
    "title": "Heckler Design",
    "description": "Designer of beautiful and secure iPad stands, audio visual (AV) hardware, commercial tablet enclosures, and point-of-sale hardware.",
    "platform": "BigCommerce",
    "role": "Built homepage, product listing pages, and product detail pages.",
    "url": "https://hecklerdesign.com/",
    "image_thumbnail": "img-ae/hecklerdesign-TN.jpg",
    "image_desktop": "img-ae/hecklerdesign-desktop.jpg",
    "image_mobile": "img-ae/hecklerdesign-mobile.jpg",
    "disabled": ""
  },
  {
    "title": "AED Superstore",
    "description": "Supplier of AEDs, CPR & First Aid Equipment.",
    "platform": "BigCommerce",
    "role": "Provided general front-end updates and support for the live site.",
    "url": "https://www.aedsuperstore.com/",
    "image_thumbnail": "img-ae/aedsuperstore-TN.jpg",
    "image_desktop": "img-ae/aedsuperstore-desktop.jpg",
    "image_mobile": "img-ae/aedsuperstore-mobile.jpg",
    "disabled": ""
  },
  {
    "title": "",
    "description": "",
    "platform": "",
    "role": "",
    "url": "",
    "image_thumbnail": "",
    "image_desktop": "",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "",
    "description": "",
    "platform": "",
    "role": "",
    "url": "",
    "image_thumbnail": "",
    "image_desktop": "",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "",
    "description": "",
    "platform": "",
    "role": "",
    "url": "",
    "image_thumbnail": "",
    "image_desktop": "",
    "image_mobile": "",
    "disabled": ""
  },
  {
    "title": "",
    "description": "",
    "platform": "",
    "role": "",
    "url": "",
    "image_thumbnail": "",
    "image_desktop": "",
    "image_mobile": "",
    "disabled": ""
  }
];

// Filter out projects that are disabled or have no title
const filteredProjectData = projectData.filter(project => project.title.length > 0 && !project.disabled);

const numToShow = 6;
let sliceStart = 0,
    sliceEnd = numToShow;

const displayCards = () => {
  // Create project card markup
  $.each(filteredProjectData.slice(sliceStart, sliceEnd), (key, val) => {
    const magicCard = `<button id="two" class='projects__card fade-in-section' 
                        data-modal-trigger
                        data-project-title='${val.title}'
                        data-project-platform='${val.platform}'
                        data-project-role='${val.role}'
                        data-project-description='${val.description}'
                        data-project-url='${val.url}'
                        data-project-image-thumbnail='${val.image_thumbnail}'
                        data-project-image-desktop='${val.image_desktop}'
                        data-project-image-mobile='${val.image_mobile}'
                      >
                        <img src='${val.image_thumbnail}'>
                        <div class='projects__card-text-wrap'>
                          <h3 class='projects__card-title'>${val.title}</h3>
                          <p class='projects__card-cta'>Learn More</p>
                        </div>
                      </button>`;
                      
    if  (val.title.length > 0) $('[data-projects-card-grid]').append(magicCard);
  });

  // Hide 'Show More' button once all cards are displayed
  if (sliceEnd >= filteredProjectData.length) {
    $('[data-projects-show-more]').hide();
  };

  // Increment slice values
  sliceStart = sliceStart + numToShow;
  sliceEnd = sliceEnd + numToShow;

  // Re-bind UI actions
  bindUIActions();
};

// ===========================================
// Scroll Fade
// ===========================================

$(document).ready(() => {

  const triggerFade = () => {
    /* Check the location of each desired element */
    $('.fade-in-section:not(.is-visible)').each((index, element) => {
        const bottom_of_object = $(element).offset().top + $(element).outerHeight() - ($(window).height() / 5);
        const bottom_of_window = $(window).scrollTop() + $(window).height();
        
        /* If the object is completely visible in the window, fade it it */
        if ( bottom_of_window > bottom_of_object ) {
            $(element).addClass('is-visible');
        }
    }); 
  };

  /* Every time the window is scrolled... */
  $(window).scroll(() => {
    triggerFade();
  });

  // Auto show elements containing on-load class
  $('.fade-in-section.fade-in-section--on-load').each((index, element) => {
    $(element).addClass('is-visible');
  });

  // Auto show anything that's already in view
  triggerFade();
});

// ==========================================
// Bind & Export
// ==========================================

const bindUIActions = () => {

  // ------------------------
  // Open Project Modal
  // ------------------------
  $(document).on('click', '[data-modal-trigger]', function() {
    var buttonId = $(this).attr('id');

    // Build the modal markup
    const projectTitle = $(this).data('project-title');
    const projectPlatform = $(this).data('project-platform');
    const projectDescription = $(this).data('project-description');
    const projectRole = $(this).data('project-role');
    const projectUrl = $(this).data('project-url');
    const projectImageThumbnail = $(this).data('project-image-thumbnail');
    const projectImageDesktop = $(this).data('project-image-desktop');
    const projectImageMobile = $(this).data('project-image-mobile');

    const linkClass = projectUrl.length > 0 ? 'visible' : 'hidden'; 

    const desktopImageMarkup = projectImageDesktop.length > 0 ? `<img src='${projectImageDesktop}' alt='${projectTitle} screenshot' class='modal__image'>` : '';
    const mobileImageMarkup = projectImageMobile.length > 0 ? `<img src='${projectImageMobile}' alt='${projectTitle} screenshot' class='modal__image'>` : '';

    const modalMarkup = `
      <div class='modal__content'>
        <button class='modal__close' data-modal-close>Close Modal</button>
        <div class='modal__text-wrap'>
          <h3 class='modal__title'>${projectTitle}</h3>
          <p class='modal__platform'>Platform: ${projectPlatform}</p>
          <p class='modal__description'><span>Client Description:</span>${projectDescription}</p>
          <p class='modal__role'><span>My Role:</span>${projectRole}</p>
          <a class='modal__url ${linkClass}' href='${projectUrl}' target='_blank'>Visit ${projectTitle}</a>
        </div>
        <div class='modal__image-wrap'>
          ${desktopImageMarkup}
          ${mobileImageMarkup}
        </div>
      </div>
    `;

    // Reveal Modal
    $('#modal-container').removeAttr('class').addClass(buttonId);
    $('body').addClass('modal-active');
    $('[data-modal-window]').scrollTop(0);
    $('[data-modal-window]').html(modalMarkup);
  })

  // ------------------------
  // Close Project Modal
  // ------------------------
  $(document).on('click', '[data-modal-close]', (e) => {
    if ($(e.target).is('[data-modal-close]')) {
      $('#modal-container').addClass('out');
      $('body').removeClass('modal-active');
    }
  });
};

// ------------------------
// 'SHOW MORE' Button
// ------------------------
$(document).on('click', '[data-projects-show-more]', (e) => {
  displayCards();
  const scrollValue = window.innerHeight / 3.5;
  window.scrollBy({
    top: scrollValue,
    left: 0,
    behavior: 'smooth'
  });
});

$(document).ready(() => {
  displayCards();
  bindUIActions();
});
